!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():this[t]=e()}("requesty",function(t){function e(t){var o=e.cache[t];if(!o){var r={};o=e.cache[t]={id:t,exports:r},e.modules[t].call(r,o,r)}return o.exports}return e.cache=[],e.modules=[function(t){var o=t.exports,r=e(2),n=e(15);o.request=function(t,e){"string"==typeof t&&(t=n.parse(t)),t||(t={}),t.host||t.port||(t.port=parseInt(window.location.port,10)),!t.host&&t.hostname&&(t.host=t.hostname),t.scheme||(t.scheme=window.location.protocol.split(":")[0]),t.host||(t.host=window.location.hostname||window.location.host),/:/.test(t.host)&&(t.port||(t.port=t.host.split(":")[1]),t.host=t.host.split(":")[0]),t.port||(t.port="https"==t.scheme?443:80);var o=new r(new s,t,e);return o},o.get=function(t,e){t.method="GET";var r=o.request(t,e);return r.end(),r},o.Agent=function(){},o.Agent.defaultMaxSockets=4;var s=function(){if("undefined"==typeof window)return null;if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],e=0;e<t.length;e++)try{var o=new window.ActiveXObject(t[e]);return function(){if(o){var r=o;return o=null,r}return new window.ActiveXObject(t[e])}}catch(r){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();o.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t){var o=e(0),r=t.exports;for(var n in o)o.hasOwnProperty(n)&&(r[n]=o[n]);r.request=function(t,e){return t||(t={}),t.scheme="https",o.request.call(this,t,e)}},function(t){var o=e(11).EventEmitter,r=e(3),n=t.exports=function(t,e,n){o.call(this);var i=this;i.writable=!0,i.xhr=t,i.body=[],i.uri=(e.scheme||"http")+"://"+e.host+(e.port?":"+e.port:"")+(e.path||"/"),"undefined"==typeof e.withCredentials&&(e.withCredentials=!0);try{t.withCredentials=e.withCredentials}catch(a){}if(e.responseType)try{t.responseType=e.responseType}catch(a){}if(t.open(e.method||"GET",i.uri,!0),i._headers={},e.headers)for(var h=s(e.headers),u=0;u<h.length;u++){var p=h[u];if(i.isSafeRequestHeader(p)){var c=e.headers[p];i.setHeader(p,c)}}var f=new r;f.on("response",n),t.onreadystatechange=function(){t.__aborted||f.handle(t)}};n.prototype=new o,n.prototype.setHeader=function(t,e){this._headers[t.toLowerCase()]=e},n.prototype.getHeader=function(t){return this._headers[t.toLowerCase()]},n.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},n.prototype.write=function(t){this.body.push(t)},n.prototype.destroy=function(){this.xhr.__aborted=!0,this.xhr.abort()},n.prototype.end=function(t){void 0!==t&&this.body.push(t);for(var e,o,r=s(this._headers),n=0;n<r.length;n++){var a=r[n],h=this._headers[a];if(i(h))for(o=0;o<h.length;o++)this.xhr.setRequestHeader(a,h[o]);else this.xhr.setRequestHeader(a,h)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(i(this.body[0])){for(e=[],n=0;n<this.body.length;n++)e.push.apply(e,this.body[n]);this.xhr.send(e)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){var u=0;for(n=0;n<this.body.length;n++)u+=this.body[n].length;e=new this.body[0].constructor(u);var p=0;for(n=0;n<this.body.length;n++){var c=this.body[n];for(o=0;o<c.length;o++)e[p++]=c[o]}this.xhr.send(e)}else{for(e="",n=0;n<this.body.length;n++)e+=this.body[n].toString();this.xhr.send(e)}},n.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],n.prototype.isSafeRequestHeader=function(t){return t?-1===a(n.unsafeHeaders,t.toLowerCase()):!1};var s=Object.keys||function(t){var e=[];for(var o in t)e.push(o);return e},i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=function(t,e){if(t.indexOf)return t.indexOf(e);for(var o=0;o<t.length;o++)if(t[o]===e)return o;return-1}},function(t){function o(t){for(var e=t.getAllResponseHeaders().split(/\r?\n/),o={},r=0;r<e.length;r++){var n=e[r];if(""!==n){var s=n.match(/^([^:]+):\s*(.*)/);if(s){var a=s[1].toLowerCase(),h=s[2];void 0!==o[a]?i(o[a])?o[a].push(h):o[a]=[o[a],h]:o[a]=h}else o[n]=!0}}return o}var r=e(11).EventEmitter,n=t.exports=function(){r.call(this),this.offset=0,this.readable=!0};n.prototype=new r;var s={streaming:!0,status2:!0};n.prototype.getResponse=function(t){var e=String(t.responseType).toLowerCase();return"blob"===e?t.responseBlob||t.response:"arraybuffer"===e?t.response:t.responseText},n.prototype.getHeader=function(t){return this.headers[t.toLowerCase()]},n.prototype.handle=function(t){if(2===t.readyState&&s.status2)try{this.statusCode=t.status,this.headers=o(t),this.emit("response",this)}catch(e){s.status2=!1}else if(s.streaming&&3===t.readyState){try{this.statusCode||(this.statusCode=t.status,this.headers=o(t),this.emit("response",this))}catch(e){}try{this._emitData(t)}catch(e){s.streaming=!1}}else 4===t.readyState&&(this.statusCode||(this.statusCode=t.status),this._emitData(t),this.emit("end"),t.error&&this.emit("error",this.getResponse(t)))},n.prototype._emitData=function(t){var e=this.getResponse(t);return e.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(e,this.offset)),void(this.offset=e.byteLength)):void(e.length>this.offset&&(this.emit("data",e.slice(this.offset)),this.offset=e.length))};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t){"use strict";function o(t){this.name="HttpError",this.message=t,Error.call(t),this.stack=(new Error).stack}function r(t,r){var h;if(0===t.scheme.indexOf("https")?(h=a,t.scheme="https"):(h=i,t.scheme="http"),t.rejectUnauthorized=!1,t.auth&&"basic"===t.auth.type){var u;u="undefined"==typeof window?new Buffer(t.auth.user+":"+t.auth.password).toString("base64"):window.btoa(t.auth.user+":"+t.auth.password);var p="Basic "+u;t.headers.Authorization=p}var c=h.request(t,function(i){function a(t){var e,o=i.headers&&i.headers["content-type"]||"text/plain";e=/^application\/json/.test(o)?JSON.parse(t):t,r(null,{data:e,headers:i.headers})}if(302===i.statusCode){var h=e(6),u=h.new(t).unproxy();return u.options.path=u.options.pathname=i.headers.location,u.useCallbacks(),u.send(t.body,r)}if(i.statusCode<200||i.statusCode>=300){var p=new o(i.statusCode+": "+f[i.statusCode]);return p.statusCode=i.statusCode,r(p)}var c=i;if(n&&i.headers&&"gzip"===i.headers["content-encoding"]?c=i.pipe(n.createGunzip()):i.setEncoding&&i.setEncoding("utf8"),s){var l=s(a);c.pipe(l)}else{var d="";i.on("data",function(t){d+=t}),i.on("end",function(){a(d)})}});c.on("error",function(t){r(t)}),t.body&&c.write(t.body),c.end()}var n,s,i,a,h="zlib",u="concat-stream",p="http",c="https";"undefined"==typeof window?(n=require(h),s=require(u),i=require(p),a=require(c)):(i=e(0),a=e(1));{var f=(e(15),e(5));e(7)}o.prototype=new Error,t.exports=r},function(t){t.exports=e(0).STATUS_CODES},function(t){"use strict";function o(t){return function(){var e=[].slice.call(arguments),o=new a;return e.push(function(t,e){return t?o.reject(t):void o.fulfill(e)}),t.apply(this,e),o}}function r(t){this.options=t||{},this.options.mode=this.options.mode||"promises"}function n(t){r.prototype[t]=function(e){return this.options.method=t.toUpperCase(),e&&this.using(e),this}}function s(t,e,o,r){var n=s.new().using(t).method(e||"GET").headers(o).send(r);return n}var i=e(15),a=e(9),h=e(4),u=o(h),p=e(7);a.prototype.catch=function(t){return this.then(null,t)},a.prototype.return=function(t){return this.then(function(){return t})},r.prototype.useCallbacks=function(){return this.options.mode="callbacks",this},r.prototype.useStreams=function(){return this.options.mode="streams",this},r.prototype.usePromises=function(){return this.options.mode="promises",this},r.prototype.auth=function(t,e){var o;return"object"==typeof t&&"undefined"==typeof e?(o=t,o.type=o.type||"basic"):o={user:t,password:e,type:"basic"},this.options.auth=o,this},r.prototype.using=function(t){var e;if("object"==typeof t)e=t;else{e={};var o=i.parse(t);e.scheme=o.protocol||"http:",e.host=e.hostname=o.hostname,e.path=o.path||"/",e.port=o.port||("http:"===e.scheme?80:443),e.method=this.options.method||"GET"}return p.assign(this.options,e),this},["get","post","put","delete","options","head"].forEach(n),r.prototype.method=function(t,e){return this.options.method=t.toUpperCase(),e&&this.using(e),this},r.prototype.unproxy=function(){return this.options=this.options.original,delete this.options.original,this},r.prototype.proxy=function(t,e,o){var r;if("object"==typeof t&&"undefined"==typeof e&&"undefined"==typeof o){if(r=t,r.type=r.type||"basic",!r.hostname)throw new Error("hostname must be supplied.")}else r={hostname:t,user:e,password:o,type:"basic"};return this.options.proxy=r,this},r.prototype.build=function(){var t=p.assign({},this.options);return function(e,o){return s.new(t).send(e,o)}},r.prototype.headers=function(t,e){var o;if("undefined"==typeof t&&"undefined"==typeof e)return this;if("object"==typeof t&&"undefined"==typeof e)o=t;else{if("string"!=typeof t)throw new TypeError("String name expected.");if("string"!=typeof e&&"number"!=typeof e)throw new TypeError("String or number value expected, got "+e);o={},o[t]=e}return this.options.headers=p.assign(this.options.headers,o),this},r.prototype.send=function(t,e){var o=this.options;if("promises"!==o.mode&&"callbacks"!==o.mode&&"streams"!==o.mode)throw new Error("Unknown mode "+o.mode);if("function"==typeof t&&(e=t,t=null),t&&"object"==typeof t&&(t.original&&delete t.original,t=JSON.stringify(t)),o.body=t,o.original=this.options,o.headers=p.assign(o.headers,{}),t?this.headers("content-length",t.length):delete this.options.headers["content-length"],!o.proxy&&process.env.http_proxy){var r=i.parse(process.env.http_proxy);o.proxy={user:r.auth.split(":")[0],password:r.auth.split(":")[1],hostname:r.hostname,port:r.port}}if(o.proxy){{var n=o.host||o.hostname;o.path}if(this.headers("host",n),o.host=o.hostname=o.proxy.hostname,o.path=o.scheme+"//"+n+o.path+(o.query||""),o.port=o.proxy.port,o.proxy.user){var s=new Buffer(o.proxy.user+":"+o.proxy.password),a="Basic "+s.toString("base64");this.headers("proxy-authorization",a)}}return"callbacks"===this.options.mode?h(o,e):"promises"===this.options.mode?u(o):"streams"===this.options.mode?h(o):void 0},s.new=function(t){return new r(t)},s.Request=r,t.exports=s},function(t){"use strict";function o(t,e){var o=-1,r=Object.keys(e),n=r.length;for(t||(t={});++o<n;){var s=r[o];t[s]=e[s]}return t}[].concat,[].slice;t.exports={assign:o,curry:e(8)}},function(t){"use strict";var e=[].concat,o=[].slice;t.exports=function(t,r){function n(){var i=o.call(arguments);if(i.length==s)return t.apply(r,i);if(i.length<s)return function(){var t=e.apply(i,arguments);return n.apply(null,t)};throw new Error("Too many arguments supplied.")}var s=t.length;return n}},function(o){var r=e(10);!function(e){"use strict";function n(t,e,o,s){for(var i,a,h,u=o;i=t.shift();)if(a=i[0],h=i[e],"function"==typeof h)try{u=h(o,s),a.resolve(u,s)}catch(p){a.reject(p)}else a._state=e,a._value=u,a._opaque=s,r(n,[a._tuple,a._state,a._value,a._opaque])}try{e=global}catch(s){try{e=window}catch(s){}}var i=Array.prototype.slice,a=Array.isArray,h=function u(t){if(t&&"object"==typeof t){for(var e in h.prototype)t[e]=h.prototype[e];return t._tuple=[],t}return this instanceof u?(this._tuple=[],void("function"==typeof t&&t(this.resolve,this.reject,this.progress,this.timeout))):new u(t)};h.prototype.then=function(t,e,o){var s=new h;return this._tuple[this._tuple.length]=[s,t,e,o],this._state&&r(n,[this._tuple,this._state,this._value,this._opaque]),s},h.prototype.spread=function(t,e,o){function r(e,o){return a(e)||(e=[e]),t.apply(t,e.concat(o))}return this.then(r,e,o)},h.prototype.done=function(t,e,o){function n(t){r(function(){if("function"!=typeof s.onerror)throw t;s.onerror(t)})}"function"!=typeof e&&(e=n);{var s=this;this.then(t,e,o)}},h.prototype.fulfill=function(t,e){return this._state||r(n,[this._tuple,this._state=1,this._value=t,this._opaque=e]),this},h.prototype.resolve=function(t,e){var o,s=0,i=this,s=0;if(!this._state){if(t===i&&i.reject(new TypeError("x === p")),t&&("object"==typeof t||"function"==typeof t))try{o=t.then}catch(a){i.reject(a)}if("function"!=typeof o)r(n,[this._tuple,this._state=1,this._value=t,this._opaque=e]);else if(!s)try{o.apply(t,[function(t){s++||i.resolve(t,e)},function(t){s++||i.reject(t)}])}catch(a){s++||i.reject(a)}}return this},h.prototype.reject=function(t,e){return this._state||r(n,[this._tuple,this._state=2,this._value=t,this._opaque=e]),this},h.prototype.progress=function(){for(var t,e=(i.call(arguments),0),o=this._tuple.length;o>e;e++)"function"==typeof(t=this._tuple[e][3])&&t.apply(this,arguments)},h.prototype.timeout=function(t,e){function o(){var t=RangeError("exceeded timeout");if(!r._state)if("function"==typeof e)e(r);else{if("function"!=typeof r.onerror)throw t;r.onerror(t)}}var r=this;return null===t?(clearTimeout(r._timer),r._timer=null):r._timer||(r._timer=setTimeout(o,t)),this},h.prototype.wrap=function(t){var e=this;return function(){var o,r=i.call(arguments);if(t instanceof h)t.fulfill(r).then(e.fulfill,e.reject);else if("function"==typeof t)try{o=t.apply(e,r),e.resolve(o)}catch(n){e.reject(n)}return e}},h.prototype.defer=function(){function t(){try{n.resolve(o.apply(n,e))}catch(t){n.reject(t)}}var e=i.call(arguments),o=e.shift(),n=this;return"function"==typeof o&&r(t,e),this},h.prototype.async=function(){function t(t,o){t?e.reject(o):e.fulfill(o)}var e=this,o=i.call(arguments);return o[o.length]=t,this.defer.apply(this,o)},h.prototype.join=function(t){function e(e){return t[e].done(function(t){r[e+1]=t},n.reject),function(){return t[e]}}var o=this,r=[],n=(new h).resolve(o).then(function(t){r[0]=t});arguments.length>1&&(t=i.call(arguments)),a(t)||(t=[t]);for(var s=0;s<t.length;s++)n=n.then(e(s));return n.then(function(){return r})},o&&o.exports?o.exports=h:"function"==typeof t&&t.amd?t(h):e.uP=h}(this)},function(e){!function(o){"use strict";function r(t,e,o){u(t,e,o)}function n(t,e,o){c[c.length]=[t,e,o],u=s,h(i)}function s(t,e,o){c[c.length]=[t,e,o]}function i(){for(var t=0;t<c.length;t++)c[t][0].apply(c[t][2],c[t][1]);u=n,c=[]}try{o=global}catch(a){try{o=window}catch(a){}}var h,u,p,c=[];if(o.process&&"function"==typeof o.process.nextTick)h=o.setImmediate&&o.process.versions.node.split(".")[1]>"10"?o.setImmediate:o.process.nextTick;else if(o.vertx&&"function"==typeof o.vertx.runOnLoop)h=o.vertx.RunOnLoop;else if(o.vertx&&"function"==typeof o.vertx.runOnContext)h=o.vertx.runOnContext;else if(p=o.MutationObserver||o.WebKitMutationObserver)h=function(t,e,o){var r=t.createElement("div");return new e(o).observe(r,{attributes:!0}),function(){r.setAttribute("x","y")}}(document,p,i);else if("function"!=typeof o.setTimeout||!o.ActiveXObject&&o.postMessage)if(o.MessageChannel&&"function"==typeof o.MessageChannel){var f=[],l=new o.MessageChannel;l.port1.onmessage=function(){f.shift()()},h=function(t){f[f.length]=t,l.port2.postMessage(0)}}else{if("function"!=typeof o.setTimeout)throw new Error("No candidate for microtask defer()");h=function(t){o.setTimeout(t,0)}}else h=function(t){o.setTimeout(t,0)};u=n,e&&e.exports?e.exports=r:"function"==typeof t&&t.amd?t(r):o.microtask=r}(this)},function(t){"use strict";function e(t,e,o,r){void 0===t[r]&&(t[r]={});var n=t[r][e];void 0===n&&(t[r][e]=n=[]),n[n.length]=o}function o(t,e,o){if(t&&t.length){for(var r=[],n=0;n<t.length;n++){var s=t[n];(s[0]!==e||o&&o!==s[1])&&(r[r.length]=s)}return r}}function r(t,e,o){var r;if(1===t.length)return r=t[0],void(void 0===o?r[0].call(r[1],e):r[0].call(r[1],e,o));for(var n=t.length;--n;)r=t[n],r[0].call(r[1],e,o)}function n(){this.onListeners=void 0,this.onceListeners=void 0}["on","once"].forEach(function(t){n.prototype[t]=function(o,r,n){return e(this,o,[r,n],t+"Listeners"),this}}),n.prototype.emit=function(t,e,o){var n,s=!1;return void 0!==this.onListeners&&(n=this.onListeners[t],n&&(r(n,e,o),s=!0)),void 0!==this.onceListeners&&(n=this.onceListeners[t],void 0!==n&&(this.onceListeners[t]=void 0,r(n,e,o),s=!0)),s},n.prototype.listeners=function(t){var e=this.onListeners[t],o=this.onceListeners[t];return void 0!==e?void 0!==o?Array.concat(e,o):e:void 0!==o?o:void 0},n.prototype.removeListener=function(t,e,r){return void 0!==this.onListeners&&(this.onListeners[t]=o(this.onListeners[t],e,r)),void 0!==this.onceListeners&&(this.onceListeners[t]=o(this.onceListeners[t],e,r)),this},n.prototype.removeAllListeners=function(t){return t?(void 0!==this.onListeners&&(this.onListeners[t]=void 0),void(void 0!==this.onceListeners&&(this.onceListeners[t]=void 0))):(this.onListeners=this.onceListeners=void 0,this)},n.prototype.addListener=n.prototype.on,n.prototype.setMaxListeners=function(){return this},n.EventEmitter=n,t.exports=n},function(t){"use strict";function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,r,n,s){r=r||"&",n=n||"=";var i={};if("string"!=typeof t||0===t.length)return i;var a=/\+/g;t=t.split(r);var h=1e3;s&&"number"==typeof s.maxKeys&&(h=s.maxKeys);var u=t.length;h>0&&u>h&&(u=h);for(var p=0;u>p;++p){var c,f,l,d,y=t[p].replace(a,"%20"),m=y.indexOf(n);m>=0?(c=y.substr(0,m),f=y.substr(m+1)):(c=y,f=""),l=decodeURIComponent(c),d=decodeURIComponent(f),e(i,l)?o(i[l])?i[l].push(d):i[l]=[i[l],d]:i[l]=d}return i};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t){"use strict";function e(t,e){if(t.map)return t.map(e);for(var o=[],r=0;r<t.length;r++)o.push(e(t[r],r));return o}var o=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,s,i,a){return s=s||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?e(n(t),function(n){var a=encodeURIComponent(o(n))+i;return r(t[n])?e(t[n],function(t){return a+encodeURIComponent(o(t))}).join(s):a+encodeURIComponent(o(t[n]))}).join(s):a?encodeURIComponent(o(a))+i+encodeURIComponent(o(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=Object.keys||function(t){var e=[];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.push(o);return e}},function(t,o){"use strict";o.decode=o.parse=e(12),o.encode=o.stringify=e(13)},function(t,o){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function n(t,e,o){if(t&&u(t)&&t instanceof r)return t;var n=new r;return n.parse(t,e,o),n}function s(t){return h(t)&&(t=n(t)),t instanceof r?t.format():r.prototype.format.call(t)}function i(t,e){return n(t,!1,!0).resolve(e)}function a(t,e){return t?n(t,!1,!0).resolveObject(e):e}function h(t){return"string"==typeof t}function u(t){return"object"==typeof t&&null!==t}function p(t){return null===t}function c(t){return null==t}var f={encode:function(){throw new Error("punycode not supported")}};o.parse=n,o.resolve=i,o.resolveObject=a,o.format=s,o.Url=r;var l=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,y=["<",">",'"',"`"," ","\r","\n","	"],m=["{","}","|","\\","^","`"].concat(y),v=["'"].concat(m),g=["%","/","?",";","#"].concat(v),b=["/","?","#"],w=255,x=/^[a-z0-9A-Z_-]{0,63}$/,j=/^([a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},q={javascript:!0,"javascript:":!0},C={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=e(14);r.prototype.parse=function(t,e,o){if(!h(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t;r=r.trim();var n=l.exec(r);if(n){n=n[0];var s=n.toLowerCase();this.protocol=s,r=r.substr(n.length)}if(o||n||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var i="//"===r.substr(0,2);!i||n&&q[n]||(r=r.substr(2),this.slashes=!0)}if(!q[n]&&(i||n&&!C[n])){for(var a=-1,u=0;u<b.length;u++){var p=r.indexOf(b[u]);-1!==p&&(-1===a||a>p)&&(a=p)}var c,d;d=-1===a?r.lastIndexOf("@"):r.lastIndexOf("@",a),-1!==d&&(c=r.slice(0,d),r=r.slice(d+1),this.auth=decodeURIComponent(c)),a=-1;for(var u=0;u<g.length;u++){var p=r.indexOf(g[u]);-1!==p&&(-1===a||a>p)&&(a=p)}-1===a&&(a=r.length),this.host=r.slice(0,a),r=r.slice(a),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var m=this.hostname.split(/\./),u=0,O=m.length;O>u;u++){var L=m[u];if(L&&!L.match(x)){for(var T="",E=0,R=L.length;R>E;E++)T+=L.charCodeAt(E)>127?"x":L[E];if(!T.match(x)){var S=m.slice(0,u),U=m.slice(u+1),k=L.match(j);k&&(S.push(k[1]),U.unshift(k[2])),U.length&&(r="/"+U.join(".")+r),this.hostname=S.join(".");break}}}if(this.hostname=this.hostname.length>w?"":this.hostname.toLowerCase(),!y){for(var M=this.hostname.split("."),H=[],u=0;u<M.length;++u){var I=M[u];H.push(I.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(I):I)}this.hostname=H.join(".")}var P=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+P,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!_[s])for(var u=0,O=v.length;O>u;u++){var z=v[u],B=encodeURIComponent(z);B===z&&(B=escape(z)),r=r.split(z).join(B)}var X=r.indexOf("#");-1!==X&&(this.hash=r.substr(X),r=r.slice(0,X));var G=r.indexOf("?");if(-1!==G?(this.search=r.substr(G),this.query=r.substr(G+1),e&&(this.query=A.parse(this.query)),r=r.slice(0,G)):e&&(this.search="",this.query={}),r&&(this.pathname=r),C[s]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",I=this.search||"";this.path=P+I}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",o=this.pathname||"",r=this.hash||"",n=!1,s="";this.host?n=t+this.host:this.hostname&&(n=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&u(this.query)&&Object.keys(this.query).length&&(s=A.stringify(this.query));var i=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||C[e])&&n!==!1?(n="//"+(n||""),o&&"/"!==o.charAt(0)&&(o="/"+o)):n||(n=""),r&&"#"!==r.charAt(0)&&(r="#"+r),i&&"?"!==i.charAt(0)&&(i="?"+i),o=o.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),i=i.replace("#","%23"),e+n+o+i+r},r.prototype.resolve=function(t){return this.resolveObject(n(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(h(t)){var e=new r;e.parse(t,!1,!0),t=e}var o=new r;if(Object.keys(this).forEach(function(t){o[t]=this[t]},this),o.hash=t.hash,""===t.href)return o.href=o.format(),o;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(o[e]=t[e])}),C[o.protocol]&&o.hostname&&!o.pathname&&(o.path=o.pathname="/"),o.href=o.format(),o;if(t.protocol&&t.protocol!==o.protocol){if(!C[t.protocol])return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.href=o.format(),o;if(o.protocol=t.protocol,t.host||q[t.protocol])o.pathname=t.pathname;else{for(var n=(t.pathname||"").split("/");n.length&&!(t.host=n.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==n[0]&&n.unshift(""),n.length<2&&n.unshift(""),o.pathname=n.join("/")}if(o.search=t.search,o.query=t.query,o.host=t.host||"",o.auth=t.auth,o.hostname=t.hostname||t.host,o.port=t.port,o.pathname||o.search){var s=o.pathname||"",i=o.search||"";o.path=s+i}return o.slashes=o.slashes||t.slashes,o.href=o.format(),o}var a=o.pathname&&"/"===o.pathname.charAt(0),u=t.host||t.pathname&&"/"===t.pathname.charAt(0),f=u||a||o.host&&t.pathname,l=f,d=o.pathname&&o.pathname.split("/")||[],n=t.pathname&&t.pathname.split("/")||[],y=o.protocol&&!C[o.protocol];if(y&&(o.hostname="",o.port=null,o.host&&(""===d[0]?d[0]=o.host:d.unshift(o.host)),o.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===n[0]?n[0]=t.host:n.unshift(t.host)),t.host=null),f=f&&(""===n[0]||""===d[0])),u)o.host=t.host||""===t.host?t.host:o.host,o.hostname=t.hostname||""===t.hostname?t.hostname:o.hostname,o.search=t.search,o.query=t.query,d=n;else if(n.length)d||(d=[]),d.pop(),d=d.concat(n),o.search=t.search,o.query=t.query;else if(!c(t.search)){if(y){o.hostname=o.host=d.shift();var m=o.host&&o.host.indexOf("@")>0?o.host.split("@"):!1;m&&(o.auth=m.shift(),o.host=o.hostname=m.shift())}return o.search=t.search,o.query=t.query,p(o.pathname)&&p(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.href=o.format(),o}if(!d.length)return o.pathname=null,o.path=o.search?"/"+o.search:null,o.href=o.format(),o;for(var v=d.slice(-1)[0],g=(o.host||t.host)&&("."===v||".."===v)||""===v,b=0,w=d.length;w>=0;w--)v=d[w],"."==v?d.splice(w,1):".."===v?(d.splice(w,1),b++):b&&(d.splice(w,1),b--);if(!f&&!l)for(;b--;b)d.unshift("..");!f||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),g&&"/"!==d.join("/").substr(-1)&&d.push("");var x=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(y){o.hostname=o.host=x?"":d.length?d.shift():"";var m=o.host&&o.host.indexOf("@")>0?o.host.split("@"):!1;m&&(o.auth=m.shift(),o.host=o.hostname=m.shift())}return f=f||o.host&&d.length,f&&!x&&d.unshift(""),d.length?o.pathname=d.join("/"):(o.pathname=null,o.path=null),p(o.pathname)&&p(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.auth=t.auth||o.auth,o.slashes=o.slashes||t.slashes,o.href=o.format(),o},r.prototype.parseHost=function(){var t=this.host,e=d.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}}],e(6)});